<?php

/**
 * @file
 * Contains openy_gc_personal_training.module.
 */

/**
 * Implements hook_theme().
 */
function openy_gc_personal_training_theme() {
  return [
    'paragraph__personal_training' => [
      'base hook' => 'paragraph',
      'variables' => [
        'app_settings' => '',
        'headline' => '',
      ],
    ],
  ];
}

/**
 * Implements hook_preprocess_html().
 *
 * Attach openy_gc_personal_training/simple_peer library.
 */
function openy_gc_personal_training_preprocess_html(&$variables) {
  if ($node = \Drupal::routeMatch()->getParameter('node')) {
    if ($node->hasField('field_content')) {
      foreach ($node->field_content as $field_item) {
        if ($field_item->entity->bundle() === 'gated_content') {
          $variables['#attached']['library'][] = 'openy_gc_personal_training/simple_peer';
        }
      }
    }

    if ($node->hasField('field_bottom_content')) {
      foreach ($node->field_bottom_content as $field_item) {
        if ($field_item->entity->bundle() === 'gated_content') {
          $variables['#attached']['library'][] = 'openy_gc_personal_training/simple_peer';
        }
      }
    }
  }
}
